<!DOCTYPE html>
<html>
  <head> 
  <title>Smart bill</title> 
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<meta content="user-scalable=no" />
  
	<link rel="stylesheet" href="Lib/jquery.mobile-1.4.2.min.css" />  
	<link rel="stylesheet" href="Scripts/icons.css"/> 
  
	<script type="text/javascript" src="Lib/jquery-1.7.1.js"></script>    
	<script type="text/javascript" src="Lib/jquery.mobile-1.4.2.min.js"></script>
	<script type="text/javascript" src="Lib/jquery.cookie.js" ></script>
	<script type="text/javascript" src="Lib/cordova-2.4.0.js" ></script>
	<meta http-equiv="Content-Type" content="text/html" charset="utf-8">
	<script type="text/javascript" src="Lib/ajaxupload.js"></script>    
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for device API libraries to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // device APIs are available
    //
    function onDeviceReady() {
         
    }

    </script>
  </head>
  <body>
<!--Authorization-->
<div data-role="page" data-theme="a" id="AuthorPage"> 
  <script type="text/javascript" src="Scripts/VKAutorizationPlugin.js"></script>   
  <script type="text/javascript" src="Scripts/UserDetails.js"></script>   
  <script type="text/javascript" src="Scripts/strings.js"></script>   
   
  <div data-role="header", data-theme="a">
    <h1 id="h3">Smart bill</h1>
	<a href="#Settings" data-rel="Settings" class="ui-btn-right ui-alt-icon ui-nodisc-icon ui-btn ui-icon-gear ui-btn-icon-notext ui-corner-all" data-role="button" role="button">Options</a>
  </div><!-- /header -->
  
  <div data-role="content">
    <div id="AuthLabel"><h4>Авторизация</h4>
      <a href="#" data-role="button" data-theme="d" id="VKButton" onclick="plugin_vk.auth(true)" data-icon="check" type="submit">Войти через Вконтакте</a>
      <a href="#" data-role="button" data-theme="d" id="UserInfoBtn" onclick="user_details.open_user_details_page()" data-icon="check" type="submit">User</a>
      <a href="#Contacts" data-role="button" data-theme="d" id="ContactsBtn" onclick="" data-icon="check" type="submit">Contacts</a>
      <a href="#ListOfBills" data-role="button" data-theme="d" id="ListOfBillsBtn" onclick="" data-icon="check" type="submit">List Of Bills</a>
    </div>
  </div><!-- /content -->
  
  <div data-role="footer", data-theme="c">
  </div><!--/footer-->
  
</div><!-- /page -->

<!--User info-->
<div data-role="page" data-theme="a" id="UserInfo"> 
  <script type="text/javascript" src="Scripts/VKAutorizationPlugin.js"></script>   
  
  <div data-role="header", data-theme="a">
    <h1>User info</h1>
	<a href="#" data-rel="back" class="ui-btn-left ui-alt-icon ui-nodisc-icon ui-btn ui-icon-carat-l ui-btn-icon-notext ui-corner-all" data-role="button" role="button">Back</a>
  </div><!-- /header -->
  
  <div data-role="content">
	
	<ul data-role="listview">
		<li>
			<img style="display:block;width:100%;height:100%;" id="userPhoto" src=""> 
				<script type="text/javascript" charset="utf-8">
					var userPhoto=document.getElementById('userPhoto');
					userPhoto.src=window.localStorage.getItem(user_info.photo);
				</script>
			</img>
			<h2 style="color:gray">Name</h2>
			<p><strong id="userNameItem" style="color:black">
				<script type="text/javascript" charset="utf-8">
					var userNameItem=document.getElementById('userNameItem');
					var name=window.localStorage.getItem(user_info.first_name);
					var last_name=window.localStorage.getItem(user_info.last_name);
					userNameItem.textContent=name+' '+last_name;
				</script>
			</strong></p>
		</li>
	</ul>
	<div id="SocialLabel"><h4 align="center" style="color:gray">Social</h4>
	<input id="vkLinkButton" href="#" data-role="button" data-theme="a" type="submit" data-icon="vk" class="ui-btn ui-corner-all ui-shadow ui-btn-icon-left ui-btn-active" value="Connect to VK"/>
	<input id="fbLinkButton" href="#" data-role="button" data-theme="a" type="submit" data-icon="fb" class="ui-btn ui-corner-all ui-shadow ui-btn-icon-left ui-btn-active" value="Connect to facebook"/>
    </div>
  </div><!-- /content -->
  
  <div data-role="footer", data-theme="c">
  </div><!--/footer-->
  
</div><!-- /page -->

<!--Persons to add-->
<div data-role="page" data-theme="b" id="Contacts">
	<div data-role="header" data-theme="a" >
		<a href="#" data-rel="back" class="ui-btn-left ui-alt-icon ui-nodisc-icon ui-btn ui-icon-carat-l ui-btn-icon-notext ui-corner-all" data-role="button" role="button">Back</a>
		<h1 id="sdf">Contacts</h1>
	</div><!--/header-->
	
	<div data-role="content" data-theme="a">
		<ul data-role="listview" data-filter="true" data-filter-placeholder="Search friends..." data-inset="true" id="FriendsList">
			<script type="text/javascript" charset="utf-8">
				$('#Contacts').bind('pageinit', function() {
					//TODO need to cache friends list, download time is too large
					plugin_vk.load_friends();
				});
			</script>
		</ul>
	</div>
</div><!-- /page -->

<!--Settings-->
<div data-role="page" data-theme="b" id="Settings">
	<div data-role="header" data-theme="a" >
		<a href="../Settings/" data-rel="back" class="ui-btn-left ui-alt-icon ui-nodisc-icon ui-btn ui-icon-carat-l ui-btn-icon-notext ui-corner-all" data-role="button" role="button">Back</a>
		<h1>Settings</h1>
	</div><!--/header-->
	
	<div data-role="content" data-theme="a">
		
	</div>
</div><!-- /page -->

<!--List of bills-->
<div data-role="page" data-theme="b" id="ListOfBills">
	
	<script>
		$( document ).on( "pagecreate", "#ListOfBills", function() {
			$( document ).on( "swipeleft swiperight", "#ListOfBills", function( e ) {
        // We check if there is no open panel on the page because otherwise
        // a swipe to close the left panel would also open the right panel (and v.v.).
        // We do this by checking the data that the framework stores on the page element (panel: open).
				if ( $( ".ui-page-active" ).jqmData( "panel" ) !== "open" ) {
					if ( e.type === "swipeleft" ) {
						$( "#right-panel" ).panel( "open" );
					} else if ( e.type === "swiperight" ) {
						$( "#left-panel" ).panel( "open" );
					}
				}
			});
		});
	</script>


	<div data-role="panel" id="right-panel" data-display="push" data-position="right" data-theme="b" class="ui-panel ui-panel-position-right ui-panel-display-push ui-body-b ui-panel-animate ui-panel-open">
		<a href="#mypanel" data-role="button" data-theme="d" id="ListOfBillsBtn" onclick="" data-icon="check" type="submit">List Of Bills</a>
	</div><!-- /panel -->

	<div data-role="header" data-theme="a" >
		<a href="#right-panel" data-rel="panel" data-position="right" class="ui-btn-right ui-alt-icon ui-nodisc-icon ui-btn ui-icon-bars ui-btn-icon-notext ui-corner-all" data-role="button" role="button">Options</a>
		<a href="#AuthorPage" data-rel="back" class="ui-btn-left ui-alt-icon ui-nodisc-icon ui-btn ui-icon-carat-l ui-btn-icon-notext ui-corner-all" data-role="button" role="button">Back</a>
		<h1>List of bills</h1>
	</div><!--/header-->
	
	<div data-role="content" data-theme="a">
		<div class="ui-grid-a">
			<a href="#mypanel" data-role="button" data-theme="d" id="ListOfBillsBtn" onclick="" data-icon="check" type="submit">List Of Bills</a>
		</div><!-- /grid-a -->
	</div>
</div><!-- /page -->

</body>
</html>